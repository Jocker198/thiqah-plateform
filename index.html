<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>منصة ثقة - Thiqah Platform</title>
<style>
:root {
  --primary-color: #0d6efd;
  --secondary-color: #084298;
  --bg-color: #f9fafb;
  --card-bg: #fff;
  --text-color: #333;
}
body { margin:0; font-family:'Cairo',sans-serif; background:var(--bg-color); color:var(--text-color); }
header { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); padding:40px 20px; text-align:center; color:white; }
header h1 { font-size:36px; margin:0; }
header p { font-size:18px; opacity:.9; }
.container { max-width:1100px; margin:auto; padding:25px; }
.section { background:var(--card-bg); padding:35px; border-radius:16px; margin-top:25px; box-shadow:0 6px 20px rgba(0,0,0,0.08); }
button { background:var(--primary-color); color:white; border:none; padding:12px 18px; border-radius:10px; cursor:pointer; transition:.3s; }
button:hover { background:var(--secondary-color); }
input, textarea { padding:12px; border-radius:8px; border:1px solid #ccc; font-size:16px; width:100%; }
textarea { height:100px; resize:none; }
.success-message { display:none; padding:15px; background:#d1f7d6; border:1px solid #9ee8a2; color:#1d6f2b; border-radius:10px; margin-top:12px; font-weight:bold; }
.card { margin-bottom:20px; padding:20px; border-radius:12px; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.08); }
.review{border-bottom:1px solid #eee;padding:10px 0;opacity:0; transform:translateY(20px); transition: all 0.4s ease;}
.review.show{opacity:1; transform:translateY(0);}
.stars span{font-size:24px; cursor:pointer; transition: transform .2s;}
.stars span:hover{transform:scale(1.3);}
footer{background:#222;color:white;text-align:center;padding:20px;margin-top:50px;}
a{color:#0d6efd;text-decoration:none;}
</style>
</head>
<body>
<header>
<h1>منصة ثقة</h1>
<p>المرجع الأول للتحقق من المتاجر الإلكترونية في المغرب</p>
</header>
<div class="container">

<!-- الصفحة الرئيسية -->
<div id="home" class="section">
<h2>لماذا منصة ثقة؟</h2>
<p>لزيادة الثقة بين المتاجر والعملاء وحماية المستخدمين من الاحتيال.</p>
</div>

<!-- تسجيل المتجر -->
<div id="register" class="section">
<h2>سجّل متجرك</h2>
<form id="storeForm">
<input type="text" id="store_name" placeholder="اسم المتجر" required>
<input type="text" id="owner_name" placeholder="اسم صاحب المتجر" required>
<input type="tel" id="phone" placeholder="رقم الهاتف" required>
<input type="url" id="store_link" placeholder="رابط المتجر (إن وجد)">
<textarea id="description" placeholder="وصف مختصر عن المتجر"></textarea>
<button type="submit">إرسال الطلب</button>
</form>
<div id="successBox" class="success-message">✔ تم تسجيل متجرك بنجاح!</div>
</div>

<!-- لوحة الإدارة -->
<div id="dashboard" class="section">
<h2>لوحة إدارة المتاجر</h2>
<div id="requests"></div>
</div>

<!-- عرض المتجر -->
<div id="shop-profile" class="section">
<h2 id="shopName">اختر متجرًا من لوحة الإدارة</h2>
<div id="shopDesc"></div>
<div>الهاتف: <span id="shopPhone"></span></div>
<div>الرابط: <a id="shopLink" href="#" target="_blank"></a></div>
<div class="stars" id="stars">
<span data-v="1">★</span><span data-v="2">★</span><span data-v="3">★</span><span data-v="4">★</span><span data-v="5">★</span>
</div>
<textarea id="reviewText" placeholder="أضف تعليقك"></textarea>
<button onclick="addReview()">إرسال التقييم</button>
<h3>التعليقات</h3>
<div id="reviews"></div>
</div>

<!-- قسم من نحن وطرق التواصل -->
<div id="about" class="section">
<h2>من نحن</h2>
<p>منصة ثقة تهدف إلى حماية المستخدمين المغاربة من الاحتيال على الإنترنت من خلال التحقق من مصداقية المتاجر الإلكترونية، وتوفير تقييمات وآراء حقيقية للمستخدمين.</p>

<h3>طرق التواصل معنا</h3>
<ul>
<li>البريد الإلكتروني: <a href="mailto:jocker.adam2021@gmail.com">jocker.adam2021@gmail.com</a></li>
<li>الهاتف: <a href="tel:+212698499814">+212 6 98 49 98 14</a></li>
<li>واتساب: <a href="https://wa.me/212698499814" target="_blank">راسلنا على واتساب</a></li>
</ul>

<h3>نموذج إرسال إشعارات عند تسجيل زائر جديد</h3>
<form id="notifyForm">
<input type="text" id="visitorName" placeholder="اسم الزائر" required>
<input type="email" id="visitorEmail" placeholder="البريد الإلكتروني للزائر" required>
<button type="submit">إرسال إشعار</button>
</form>
<div id="notifySuccess" class="success-message">تم إرسال الإشعار بنجاح!</div>
</div>

</div>
<footer>
<p>© 2025 منصة ثقة – جميع الحقوق محفوظة</p>
<p><a href="#privacy">سياسة الخصوصية</a> | <a href="#terms">شروط الاستخدام</a></p>
</footer>

<script>
// قاعدة البيانات في LocalStorage
let shopsDB = JSON.parse(localStorage.getItem('shopsDB') || '[]');

// تسجيل متجر
const form = document.getElementById('storeForm');
const successBox = document.getElementById('successBox');
form.addEventListener('submit', function(e){
    e.preventDefault();
    const shop = {
        id: shopsDB.length+1,
        name: document.getElementById('store_name').value,
        owner: document.getElementById('owner_name').value,
        phone: document.getElementById('phone').value,
        link: document.getElementById('store_link').value,
        desc: document.getElementById('description').value
    };
    shopsDB.push(shop);
    localStorage.setItem('shopsDB', JSON.stringify(shopsDB));
    form.reset();
    successBox.style.display='block';
    renderDashboard();
    setTimeout(()=>{ successBox.style.display='none'; },3000);
});

// لوحة الإدارة
const container = document.getElementById('requests');
function renderDashboard(){
    container.innerHTML='';
    shopsDB.forEach(shop=>{
        const div = document.createElement('div');
        div.className='card';
        div.innerHTML = `<strong>${shop.name}</strong> (<a href='#' onclick='loadShop(${shop.id})'>عرض المتجر</a>)<br>صاحب المتجر: ${shop.owner}<br>هاتف: ${shop.phone}<br>رابط: <a href='${shop.link}' target='_blank'>${shop.link}</a>`;
        container.appendChild(div);
    });
}
renderDashboard();

// عرض المتجر
let selected = 0;
let reviews = [];
function loadShop(id){
    const shop = shopsDB.find(s=>s.id===id);
    if(!shop) return;
    document.getElementById('shopName').innerText = shop.name;
    document.getElementById('shopDesc').innerText = shop.desc;
    document.getElementById('shopPhone').innerText = shop.phone;
    document.getElementById('shopLink').innerText = shop.link;
    document.getElementById('shopLink').href = shop.link;
    reviews = JSON.parse(localStorage.getItem('reviews_' + id) || '[]');
    renderReviews();
}

// التقييم
document.querySelectorAll('#stars span').forEach(s=>{
  s.onclick = ()=>{
    selected = s.dataset.v;
    document.querySelectorAll('#stars span').forEach(x=>x.style.color = x.dataset.v <= selected ? 'gold' : '#000');
  };
});
function addReview(){
    let text = document.getElementById('reviewText').value.trim();
    if(!text || selected==0) return;
    let newReview = {stars:selected, text};
    reviews.push(newReview);
    const shopId = shopsDB.findIndex(s=>s.name===document.getElementById('shopName').innerText) + 1;
    localStorage.setItem('reviews_' + shopId, JSON.stringify(reviews));
    document.getElementById('reviewText').value="";
    selected=0;
    document.querySelectorAll('#stars span').forEach(x=>x.style.color='#000');
    renderReviews(newReview);
}
function renderReviews(latest=null){
  const box = document.getElementById('reviews');
  box.innerHTML='';
  reviews.forEach(r=>{
    let div=document.createElement('div');
    div.className='review';
    div.innerHTML = `<strong>${'★'.repeat(r.stars)}</strong><br>${r.text}`;
    box.appendChild(div);
  });
  document.querySelectorAll('.review').forEach((el,i)=>{ setTimeout(()=>{el.classList.add('show');}, i*100); });
}

// إشعار عند تسجيل زائر جديد
document.getElementById('notifyForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = document.getElementById('visitorName').value;
  const email = document.getElementById('visitorEmail').value;
  const phone = '212698499814'; // ضع رقمك هنا
  const message = encodeURIComponent(`زائر جديد سجل في منصة ثقة:\nالاسم: ${name}\nالبريد: ${email}`);
  window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
  document.getElementById('notifyForm').reset();
  document.getElementById('notifySuccess').style.display = 'block';
  setTimeout(()=>{ document.getElementById('notifySuccess').style.display='none'; }, 4000);
});
</script>
</body>
</html>
